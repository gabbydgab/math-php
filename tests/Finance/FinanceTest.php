<?php
namespace Math;

class FinanceTest extends \PHPUnit_Framework_TestCase
{
    /**
     * @dataProvider dataProviderForPMT
     */
    public function testPMT(float $rate, int $periods, float $pv, float $fv, bool $beginning, float $pmt)
    {
        $this->assertEquals($pmt, Finance::pmt($rate, $periods, $pv, $fv, $beginning));
    }

    public function dataProviderForPMT()
    {
        return [
            [0.0, 1, 0, 0, false, 0.0],
            [0.0, 1, 1, 0, false, -1.0],
            [0.0, 1, -1, 0, false, 1.0],
            [0.0, 1, 1, 0, true, -1.0],
            [0.0, 1, -1, 0, true, 1.0],
            [0.0, 2, 1, 0, false, -0.5],
            [0.0, 2, -1, 0, false, 0.5],
            [0.0, 2, 1, 0, true, -0.5],
            [0.0, 2, -1, 0, true, 0.5],
            [0.05, 30, 250000, 0, false, -16262.858770069148],
            [0.05, 30, -250000, 0, false, 16262.858770069148],
            [0.05, 30, 250000, 0, true, -15488.436923875368],
            [0.05, 30, -250000, 0, true, 15488.436923875368],
            [0.04/12, 12*30, 85000, 0, false, -405.80300114563494],
            [0.04/12, 12*30, -85000, 0, false, 405.80300114563494],
            [0.04/12, 12*30, 85000, 0, true, -404.45481841757629],
            [0.04/12, 12*30, -85000, 0, true, 404.45481841757629],
            [0.035/12, 12*30, 475000, 0, false, -2132.9622670919189],
            [0.035/12, 12*30, -475000, 0, false, 2132.9622670919189],
            [0.035/12, 12*30, 475000, 0, true, -2126.7592193687524],
            [0.035/12, 12*30, -475000, 0, true, 2126.7592193687524],
            [0.035/12, 12*30, 475000, 100000, false, -2290.3402882340679],
            [0.035/12, 12*30, -475000, -100000, false, 2290.3402882340679],
            [0.035/12, 12*30, 475000, 100000, true, -2283.6795561951658],
            [0.035/12, 12*30, -475000, -100000, true, 2283.6795561951658],
        ];
    }
}
